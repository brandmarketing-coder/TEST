<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸–ç•Œåœ°ç†å°ç™¾ç§‘</title>
    <!-- Tailwind CSS for rapid styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts for Traditional Chinese -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #f0f9ff;
            background-image: radial-gradient(#e0f2fe 1px, transparent 1px);
            background-size: 20px 20px;
        }

        /* Card Hover Effects */
        .geo-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .geo-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
        }

        /* Modal Animation */
        .modal-enter {
            opacity: 0;
            transform: scale(0.9);
        }
        .modal-enter-active {
            opacity: 1;
            transform: scale(1);
            transition: opacity 300ms, transform 300ms;
        }
        .modal-exit {
            opacity: 1;
            transform: scale(1);
        }
        .modal-exit-active {
            opacity: 0;
            transform: scale(0.9);
            transition: opacity 200ms, transform 200ms;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1; 
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8; 
        }

        .emoji-flag {
            font-family: "Segoe UI Emoji", "Segoe UI Symbol", "Apple Color Emoji", "Noto Color Emoji", sans-serif;
        }
    </style>
</head>
<body class="min-h-screen text-slate-800">

    <!-- Navigation Bar -->
    <nav class="bg-white shadow-md sticky top-0 z-40">
        <div class="max-w-6xl mx-auto px-4 py-4 flex justify-between items-center">
            <div class="flex items-center gap-2 cursor-pointer" onclick="renderHome()">
                <i class="fa-solid fa-earth-americas text-3xl text-blue-600"></i>
                <h1 class="text-xl md:text-2xl font-bold text-slate-800 tracking-wide">ä¸–ç•Œåœ°ç†å°ç™¾ç§‘</h1>
            </div>
            <button onclick="renderHome()" class="hidden md:block px-4 py-2 rounded-full bg-blue-100 text-blue-600 hover:bg-blue-200 font-bold transition">
                <i class="fa-solid fa-house mr-2"></i>å›é¦–é 
            </button>
        </div>
    </nav>

    <!-- Main Content Area -->
    <main id="app-container" class="max-w-6xl mx-auto px-4 py-8">
        <!-- Content will be injected here by JavaScript -->
    </main>

    <!-- Footer -->
    <footer class="bg-slate-800 text-white py-8 mt-12">
        <div class="max-w-6xl mx-auto px-4 text-center">
            <p class="mb-2">æ¢ç´¢ä¸–ç•Œï¼Œç™¼ç¾æ–°çŸ¥ ğŸŒ</p>
            <p class="text-slate-400 text-sm">Â© 2023 åœ°ç†çŸ¥è­˜äº’å‹•ç¶²é  | å­¸ç¿’ç”¨é€”ç¯„ä¾‹</p>
        </div>
    </footer>

    <!-- Modal Template (Hidden by default) -->
    <div id="info-modal" class="fixed inset-0 z-50 hidden flex items-center justify-center bg-black bg-opacity-50 p-4 backdrop-blur-sm transition-opacity duration-300 opacity-0">
        <div class="bg-white rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden transform transition-all duration-300 scale-90" id="modal-content">
            <!-- Header with Color -->
            <div id="modal-header-bg" class="h-24 bg-blue-500 relative flex justify-center items-end">
                <button onclick="closeModal()" class="absolute top-4 right-4 bg-white/20 hover:bg-white/40 text-white rounded-full p-2 w-8 h-8 flex items-center justify-center transition">
                    <i class="fa-solid fa-xmark"></i>
                </button>
                <div class="emoji-flag text-6xl shadow-lg rounded-full bg-white w-20 h-20 flex items-center justify-center absolute -bottom-10 border-4 border-white" id="modal-flag">
                    ğŸ‡¹ğŸ‡¼
                </div>
            </div>
            
            <!-- Body -->
            <div class="pt-12 px-6 pb-6 text-center">
                <h2 id="modal-country-name" class="text-3xl font-bold text-slate-800 mb-1">å°ç£</h2>
                <p id="modal-capital" class="text-slate-500 text-sm mb-6 uppercase tracking-wider font-semibold">é¦–éƒ½ï¼šå°åŒ—</p>
                
                <div class="text-left bg-slate-50 rounded-xl p-5 border border-slate-100">
                    <h3 class="font-bold text-slate-700 mb-3 flex items-center gap-2">
                        <i class="fa-solid fa-lightbulb text-yellow-500"></i> ä½ çŸ¥é“å—ï¼Ÿ
                    </h3>
                    <p id="modal-fact" class="text-slate-600 leading-relaxed">
                        é€™è£¡æœƒé¡¯ç¤ºæœ‰è¶£çš„å†·çŸ¥è­˜...
                    </p>
                </div>

                <div class="mt-6 flex justify-center gap-4">
                     <div class="flex flex-col items-center">
                        <span class="text-xs text-slate-400 mb-1">è‘—ååœ°æ¨™</span>
                        <span id="modal-landmark" class="font-medium text-slate-700">å°åŒ— 101</span>
                     </div>
                     <div class="w-px bg-slate-200"></div>
                     <div class="flex flex-col items-center">
                        <span class="text-xs text-slate-400 mb-1">ä¸»è¦èªè¨€</span>
                        <span id="modal-language" class="font-medium text-slate-700">ä¸­æ–‡</span>
                     </div>
                </div>

                <button onclick="closeModal()" class="mt-8 w-full py-3 bg-slate-800 text-white rounded-xl font-bold hover:bg-slate-700 transition">
                    é—œé–‰è¦–çª—
                </button>
            </div>
        </div>
    </div>

    <script>
        // --- Data: World Geography Knowledge ---
        const geoData = {
            asia: {
                id: 'asia',
                name: 'äºæ´²',
                color: 'bg-red-500',
                bgLight: 'bg-red-50',
                text: 'text-red-600',
                icon: 'fa-torii-gate',
                description: 'ä¸–ç•Œä¸Šé¢ç©æœ€å¤§ã€äººå£æœ€å¤šçš„å¤§æ´²ï¼Œæ“æœ‰è±å¯Œçš„æ–‡åŒ–å¤šæ¨£æ€§ã€‚',
                countries: [
                    {
                        name: 'å°ç£',
                        flag: 'ğŸ‡¹ğŸ‡¼',
                        capital: 'å°åŒ—',
                        landmark: 'å°åŒ— 101',
                        language: 'ç¹é«”ä¸­æ–‡',
                        fact: 'å°ç£ä¾¿åˆ©å•†åº—çš„å¯†åº¦æ˜¯å…¨çƒç¬¬äºŒé«˜ï¼ä½ å¯ä»¥åœ¨é€™è£¡ç¹³è²»ã€å¯„åŒ…è£¹ã€è²·è»Šç¥¨ï¼Œç”šè‡³æ´—è¡£æœã€‚æ­¤å¤–ï¼Œå°ç£ä¹Ÿæ˜¯çç å¥¶èŒ¶çš„ç™¼æºåœ°ã€‚'
                    },
                    {
                        name: 'æ—¥æœ¬',
                        flag: 'ğŸ‡¯ğŸ‡µ',
                        capital: 'æ±äº¬',
                        landmark: 'å¯Œå£«å±±',
                        language: 'æ—¥èª',
                        fact: 'æ—¥æœ¬æ“æœ‰ä¸–ç•Œä¸Šæœ€å¤è€çš„å…¬å¸ã€Œé‡‘å‰›çµ„ã€ï¼Œæˆç«‹æ–¼è¥¿å…ƒ578å¹´ï¼Œå°ˆé–€å»ºé€ å¯ºå»Ÿï¼Œè‡³ä»Šå·²ç‡Ÿæ¥­è¶…é1400å¹´ã€‚æ­¤å¤–ï¼Œæ—¥æœ¬çš„è‡ªå‹•è²©è³£æ©Ÿå¯†åº¦æ¥µé«˜ã€‚'
                    },
                    {
                        name: 'å°åº¦',
                        flag: 'ğŸ‡®ğŸ‡³',
                        capital: 'æ–°å¾·é‡Œ',
                        landmark: 'æ³°å§¬ç‘ªå“ˆé™µ',
                        language: 'å°åœ°èª/è‹±èª',
                        fact: 'å°åº¦æ˜¯è¥¿æ´‹æ£‹ï¼ˆChessï¼‰çš„ç™¼æºåœ°ï¼Œå¤ç¨±ã€Œæ°åœ–è˜­å¡ã€ã€‚å¦å¤–ï¼Œå°åº¦æ“æœ‰ä¸–ç•Œä¸Šæœ€å¤šçš„ç´ é£Ÿäººå£ã€‚'
                    },
                    {
                        name: 'æ³°åœ‹',
                        flag: 'ğŸ‡¹ğŸ‡­',
                        capital: 'æ›¼è°·',
                        landmark: 'å¤§çš‡å®®',
                        language: 'æ³°èª',
                        fact: 'æ›¼è°·çš„å…¨åæ˜¯ä¸–ç•Œä¸Šæœ€é•·çš„åœ°åï¼Œç”±169å€‹æ‹‰ä¸å­—æ¯çµ„æˆï¼Œç¿»è­¯éä¾†åŒ…å«ã€Œå¤©ä½¿ä¹‹åŸã€å®å‰ä¹‹åŸã€ç‰ä½›çš„å¯¶åº§...ã€ç­‰æ¥µé•·çš„å°Šç¨±ã€‚'
                    }
                ]
            },
            europe: {
                id: 'europe',
                name: 'æ­æ´²',
                color: 'bg-blue-500',
                bgLight: 'bg-blue-50',
                text: 'text-blue-600',
                icon: 'fa-landmark',
                description: 'è¥¿æ–¹æ–‡æ˜çš„ç™¼æºåœ°ï¼Œæ“æœ‰æ‚ ä¹…çš„æ­·å²å»ºç¯‰èˆ‡è—è¡“éºç”¢ã€‚',
                countries: [
                    {
                        name: 'æ³•åœ‹',
                        flag: 'ğŸ‡«ğŸ‡·',
                        capital: 'å·´é»',
                        landmark: 'è‰¾è²çˆ¾éµå¡”',
                        language: 'æ³•èª',
                        fact: 'è‰¾è²çˆ¾éµå¡”åœ¨å¤å¤©æœƒé•·é«˜ï¼å› ç‚ºç†±è„¹å†·ç¸®çš„åŸç†ï¼Œéµå¡”çš„é«˜åº¦åœ¨ç‚ç†±çš„å¤å­£å¯èƒ½æœƒå¢åŠ ç´„15å…¬åˆ†ã€‚'
                    },
                    {
                        name: 'ç¾©å¤§åˆ©',
                        flag: 'ğŸ‡®ğŸ‡¹',
                        capital: 'ç¾…é¦¬',
                        landmark: 'ç¾…é¦¬ç«¶æŠ€å ´',
                        language: 'ç¾©å¤§åˆ©èª',
                        fact: 'éŠå®¢æ¯å¹´æœƒå‘ç¾…é¦¬çš„ç‰¹é›·ç¶­è¨±é¡˜æ± ï¼ˆTrevi Fountainï¼‰æŠ•æ“²è¶…é100è¬æ­å…ƒçš„ç¡¬å¹£ã€‚é€™äº›éŒ¢æœƒè¢«æ”¶é›†èµ·ä¾†æçµ¦æ…ˆå–„æ©Ÿæ§‹ã€‚'
                    },
                    {
                        name: 'å†°å³¶',
                        flag: 'ğŸ‡®ğŸ‡¸',
                        capital: 'é›·å…‹é›…ç¶­å…‹',
                        landmark: 'è—æ¹–æº«æ³‰',
                        language: 'å†°å³¶èª',
                        fact: 'å†°å³¶æ˜¯ä¸–ç•Œä¸Šå°‘æ•¸å®Œå…¨æ²’æœ‰èšŠå­çš„åœ‹å®¶ä¹‹ä¸€ï¼å› ç‚ºæ°£å€™è®ŠåŒ–å¤ªå¿«ï¼ŒèšŠå­ç„¡æ³•å®Œæˆç”Ÿå‘½é€±æœŸã€‚'
                    },
                    {
                        name: 'è·è˜­',
                        flag: 'ğŸ‡³ğŸ‡±',
                        capital: 'é˜¿å§†æ–¯ç‰¹ä¸¹',
                        landmark: 'é¢¨è»Šæ‘',
                        language: 'è·è˜­èª',
                        fact: 'è·è˜­ç”·æ€§çš„å¹³å‡èº«é«˜æ˜¯ä¸–ç•Œæœ€é«˜çš„ï¼Œå¹³å‡ç´„183å…¬åˆ†ã€‚æ­¤å¤–ï¼Œè·è˜­çš„è‡ªè¡Œè»Šæ•¸é‡æ¯”äººå£é‚„è¦å¤šã€‚'
                    }
                ]
            },
            americas: {
                id: 'americas',
                name: 'ç¾æ´²',
                color: 'bg-green-500',
                bgLight: 'bg-green-50',
                text: 'text-green-600',
                icon: 'fa-mountain-sun',
                description: 'åŒ…å«åŒ—ç¾èˆ‡å—ç¾ï¼Œæ“æœ‰å£¯éº—çš„è‡ªç„¶æ™¯è§€èˆ‡å¤šå…ƒç§»æ°‘æ–‡åŒ–ã€‚',
                countries: [
                    {
                        name: 'ç¾åœ‹',
                        flag: 'ğŸ‡ºğŸ‡¸',
                        capital: 'è¯ç››é “ç‰¹å€',
                        landmark: 'è‡ªç”±å¥³ç¥åƒ',
                        language: 'è‹±èª',
                        fact: 'ç¾åœ‹å…¬å…±åœ–æ›¸é¤¨çš„æ•¸é‡æ¯”éº¥ç•¶å‹é‚„å¤šï¼é€™é¡¯ç¤ºäº†ç¤¾å€æ•™è‚²è³‡æºçš„æ™®åŠç¨‹åº¦ã€‚'
                    },
                    {
                        name: 'å·´è¥¿',
                        flag: 'ğŸ‡§ğŸ‡·',
                        capital: 'å·´è¥¿åˆ©äº',
                        landmark: 'åŸºç£åƒ',
                        language: 'è‘¡è„ç‰™èª',
                        fact: 'å·´è¥¿æ˜¯ä¸–ç•Œä¸Šç”Ÿç‰©å¤šæ¨£æ€§æœ€è±å¯Œçš„åœ‹å®¶ï¼Œäºé¦¬éœé›¨æ—ç”¢ç”Ÿäº†åœ°çƒä¸Šç´„20%çš„æ°§æ°£ï¼Œè¢«ç¨±ç‚ºã€Œåœ°çƒä¹‹è‚ºã€ã€‚'
                    },
                    {
                        name: 'åŠ æ‹¿å¤§',
                        flag: 'ğŸ‡¨ğŸ‡¦',
                        capital: 'æ¸¥å¤ªè¯',
                        landmark: 'å°¼åŠ æ‹‰ç€‘å¸ƒ',
                        language: 'è‹±èª/æ³•èª',
                        fact: 'åŠ æ‹¿å¤§æ“æœ‰ä¸–ç•Œä¸Šæœ€å¤šçš„æ¹–æ³Šï¼Œå…¶æ¹–æ³Šç¸½æ•¸è¶…éäº†ä¸–ç•Œå…¶ä»–æ‰€æœ‰åœ‹å®¶æ¹–æ³Šæ•¸é‡çš„ç¸½å’Œã€‚'
                    },
                    {
                        name: 'ç§˜é­¯',
                        flag: 'ğŸ‡µğŸ‡ª',
                        capital: 'åˆ©é¦¬',
                        landmark: 'é¦¬ä¸˜æ¯”ä¸˜',
                        language: 'è¥¿ç­ç‰™èª',
                        fact: 'é¦¬éˆ´è–¯æœ€æ—©èµ·æºæ–¼ç§˜é­¯ï¼é€™è£¡æœ‰è¶…é3000ç¨®ä¸åŒå“ç¨®çš„é¦¬éˆ´è–¯ï¼Œé¡è‰²å’Œå½¢ç‹€åƒå¥‡ç™¾æ€ªã€‚'
                    }
                ]
            },
            africa: {
                id: 'africa',
                name: 'éæ´²',
                color: 'bg-yellow-500',
                bgLight: 'bg-yellow-50',
                text: 'text-yellow-600',
                icon: 'fa-paw',
                description: 'äººé¡çš„èµ·æºåœ°ï¼Œæ“æœ‰å»£é—Šçš„è‰åŸèˆ‡ç¨ç‰¹çš„é‡ç”Ÿç”Ÿæ…‹ã€‚',
                countries: [
                    {
                        name: 'åŸƒåŠ',
                        flag: 'ğŸ‡ªğŸ‡¬',
                        capital: 'é–‹ç¾…',
                        landmark: 'é‡‘å­—å¡”',
                        language: 'é˜¿æ‹‰ä¼¯èª',
                        fact: 'é›–ç„¶ç¾åœ¨æ˜¯æ²™æ¼ ï¼Œä½†åœ¨å»ºé€ é‡‘å­—å¡”æ™‚æœŸï¼Œæ’’å“ˆæ‹‰åœ°å€å…¶å¯¦æ˜¯ç¶ æ„ç›ç„¶çš„è‰åŸã€‚å¦å¤–ï¼Œå¤åŸƒåŠäººç™¼æ˜äº†365å¤©çš„æ›†æ³•ã€‚'
                    },
                    {
                        name: 'é¦¬é”åŠ æ–¯åŠ ',
                        flag: 'ğŸ‡²ğŸ‡¬',
                        capital: 'å¡”é‚£é‚£åˆ©ä½›',
                        landmark: 'çŒ´éºµåŒ…æ¨¹å¤§é“',
                        language: 'é¦¬æ‹‰åŠ è¥¿èª',
                        fact: 'é¦¬é”åŠ æ–¯åŠ ç´„90%çš„é‡ç”Ÿå‹•æ¤ç‰©æ˜¯è©²å³¶ç‰¹æœ‰çš„ï¼Œåœ¨ä¸–ç•Œå…¶ä»–åœ°æ–¹éƒ½æ‰¾ä¸åˆ°ï¼Œä¾‹å¦‚å„å¼å„æ¨£çš„ç‹çŒ´ã€‚'
                    },
                    {
                        name: 'è‚¯äº',
                        flag: 'ğŸ‡°ğŸ‡ª',
                        capital: 'å¥ˆæ´›æ¯”',
                        landmark: 'é¦¬è³½é¦¬æ‹‰',
                        language: 'æ–¯ç“¦å¸Œé‡Œèª',
                        fact: 'è‚¯äºæ˜¯é•·è·‘é¸æ‰‹çš„æ–ç±ƒï¼Œè©²åœ‹ Kalenjin éƒ¨è½çš„äººå£åƒ…ä½”ä¸–ç•Œ0.06%ï¼Œå»è´å¾—äº†å¤§æ¯”ä¾‹çš„åœ‹éš›é•·è·‘çç‰Œã€‚'
                    }
                ]
            },
            oceania: {
                id: 'oceania',
                name: 'å¤§æ´‹æ´²',
                color: 'bg-indigo-500',
                bgLight: 'bg-indigo-50',
                text: 'text-indigo-600',
                icon: 'fa-water',
                description: 'ç”±æ¾³æ´²å¤§é™¸åŠç„¡æ•¸å¤ªå¹³æ´‹å³¶å¶¼çµ„æˆï¼Œæµ·æ´‹è³‡æºè±å¯Œã€‚',
                countries: [
                    {
                        name: 'æ¾³æ´²',
                        flag: 'ğŸ‡¦ğŸ‡º',
                        capital: 'ååŸ¹æ‹‰',
                        landmark: 'é›ªæ¢¨æ­ŒåŠ‡é™¢',
                        language: 'è‹±èª',
                        fact: 'æ¾³æ´²çš„è¢‹é¼ æ•¸é‡æ¯”äººå£é‚„å¤šï¼å¦‚æœä½ ç®—ä¸€ç®—ï¼Œå¹³å‡æ¯å€‹æ¾³æ´²äººå¯ä»¥åˆ†é…åˆ°å…©éš»è¢‹é¼ ã€‚'
                    },
                    {
                        name: 'ç´è¥¿è˜­',
                        flag: 'ğŸ‡³ğŸ‡¿',
                        capital: 'å¨éˆé “',
                        landmark: 'ç±³çˆ¾ç¦å¾·å³½ç£',
                        language: 'è‹±èª/æ¯›åˆ©èª',
                        fact: 'ç´è¥¿è˜­æ˜¯ã€Šé­”æˆ’ã€‹é›»å½±çš„æ‹æ”åœ°ã€‚é€™è£¡æ²’æœ‰è›‡ï¼Œä¸”æ“æœ‰ä¸€åº§åç‚ºã€ŒTaumatawhakatangihangakoauauotamateaturipukakapikimaungahoronukupokaiwhenuakitanatahuã€çš„å±±ï¼Œæ˜¯ä¸–ç•Œä¸Šåå­—æœ€é•·çš„åœ°åä¹‹ä¸€ã€‚'
                    }
                ]
            }
        };

        const appContainer = document.getElementById('app-container');
        const modal = document.getElementById('info-modal');
        const modalContent = document.getElementById('modal-content');

        // --- Functions ---

        // 1. Render Home (World Map View)
        function renderHome() {
            // Smooth scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });

            let html = `
                <div class="text-center mb-10 fade-in">
                    <h2 class="text-3xl font-bold text-slate-800 mb-2">æ¢ç´¢ä¸–ç•Œæ¿å¡Š</h2>
                    <p class="text-slate-500">é»æ“Šä¸‹æ–¹çš„å¤§æ´²ï¼Œé–‹å§‹æ‚¨çš„åœ°ç†çŸ¥è­˜ä¹‹æ—…</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            `;

            for (const key in geoData) {
                const region = geoData[key];
                html += `
                    <div onclick="renderRegion('${key}')" class="geo-card cursor-pointer bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden group">
                        <div class="h-32 ${region.color} flex items-center justify-center relative overflow-hidden">
                            <i class="fa-solid ${region.icon} text-6xl text-white opacity-80 group-hover:scale-110 transition duration-500"></i>
                            <div class="absolute -bottom-4 -right-4 text-white opacity-20 text-8xl">
                                <i class="fa-solid fa-earth-americas"></i>
                            </div>
                        </div>
                        <div class="p-6">
                            <h3 class="text-2xl font-bold text-slate-800 mb-2 flex items-center gap-2">
                                ${region.name} 
                                <i class="fa-solid fa-arrow-right text-sm opacity-0 group-hover:opacity-100 transform -translate-x-2 group-hover:translate-x-0 transition text-slate-400"></i>
                            </h3>
                            <p class="text-slate-500 text-sm leading-relaxed">${region.description}</p>
                            <div class="mt-4 flex items-center gap-2 text-xs font-bold ${region.text} bg-white border border-slate-100 inline-block px-3 py-1 rounded-full shadow-sm">
                                <span>${region.countries.length} å€‹åœ‹å®¶è³‡æ–™</span>
                            </div>
                        </div>
                    </div>
                `;
            }

            html += `</div>`;
            appContainer.innerHTML = html;
        }

        // 2. Render Region (Country List View)
        function renderRegion(regionKey) {
            const region = geoData[regionKey];
            
            // Generate Countries HTML
            let countriesHtml = '';
            region.countries.forEach(country => {
                // We stringify the country object to pass it to the function, handling quotes
                const countryString = JSON.stringify(country).replace(/"/g, '&quot;');
                
                countriesHtml += `
                    <div onclick="showCountryDetails(${countryString}, '${region.color}')" class="geo-card cursor-pointer bg-white rounded-xl shadow-sm border border-slate-100 p-4 flex items-center gap-4 hover:bg-slate-50 group">
                        <div class="text-4xl shadow-sm rounded-lg p-2 bg-slate-50 border border-slate-100 emoji-flag">${country.flag}</div>
                        <div class="flex-1">
                            <h4 class="text-lg font-bold text-slate-800 group-hover:text-blue-600 transition">${country.name}</h4>
                            <p class="text-xs text-slate-500">é¦–éƒ½ï¼š${country.capital}</p>
                        </div>
                        <div class="w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center text-slate-400 group-hover:bg-blue-100 group-hover:text-blue-600 transition">
                            <i class="fa-solid fa-plus"></i>
                        </div>
                    </div>
                `;
            });

            const html = `
                <div class="mb-6 flex items-center gap-2 text-sm text-slate-500">
                    <span class="hover:text-blue-600 cursor-pointer" onclick="renderHome()">é¦–é </span>
                    <i class="fa-solid fa-chevron-right text-xs"></i>
                    <span class="font-bold text-slate-800">${region.name}</span>
                </div>

                <div class="bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden mb-8">
                    <div class="${region.color} p-8 text-white relative overflow-hidden">
                        <div class="relative z-10">
                            <h2 class="text-4xl font-bold mb-2 flex items-center gap-3">
                                <i class="fa-solid ${region.icon}"></i> ${region.name}
                            </h2>
                            <p class="text-white text-opacity-90 max-w-2xl">${region.description}</p>
                        </div>
                        <i class="fa-solid fa-earth-americas absolute -right-10 -bottom-20 text-9xl text-white opacity-20"></i>
                    </div>
                </div>

                <h3 class="text-xl font-bold text-slate-800 mb-4 px-2 border-l-4 ${region.text.replace('text', 'border')} pl-3">ç²¾é¸åœ‹å®¶</h3>
                
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    ${countriesHtml}
                </div>

                <div class="mt-8 text-center">
                    <button onclick="renderHome()" class="px-6 py-2 rounded-full border border-slate-300 text-slate-600 hover:bg-slate-100 font-bold transition">
                        <i class="fa-solid fa-arrow-left mr-2"></i>è¿”å›ä¸–ç•Œåœ°åœ–
                    </button>
                </div>
            `;

            appContainer.innerHTML = html;
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // 3. Show Modal
        function showCountryDetails(country, colorClass) {
            // Update Modal Content
            document.getElementById('modal-flag').textContent = country.flag;
            document.getElementById('modal-country-name').textContent = country.name;
            document.getElementById('modal-capital').textContent = `é¦–éƒ½ï¼š${country.capital}`;
            document.getElementById('modal-fact').textContent = country.fact;
            document.getElementById('modal-landmark').textContent = country.landmark;
            document.getElementById('modal-language').textContent = country.language;

            // Update Header Color (remove old color classes first)
            const header = document.getElementById('modal-header-bg');
            header.className = `h-24 relative flex justify-center items-end ${colorClass}`;

            // Show Modal
            modal.classList.remove('hidden');
            // Small timeout to allow display:block to apply before opacity transition
            setTimeout(() => {
                modal.classList.remove('opacity-0');
                modalContent.classList.remove('scale-90');
                modalContent.classList.add('scale-100');
            }, 10);
        }

        // 4. Close Modal
        function closeModal() {
            modal.classList.add('opacity-0');
            modalContent.classList.remove('scale-100');
            modalContent.classList.add('scale-90');
            
            setTimeout(() => {
                modal.classList.add('hidden');
            }, 300);
        }

        // Close modal when clicking outside
        modal.addEventListener('click', (e) => {
            if (e.target === modal) {
                closeModal();
            }
        });

        // Initialize
        renderHome();

    </script>
</body>
</html>